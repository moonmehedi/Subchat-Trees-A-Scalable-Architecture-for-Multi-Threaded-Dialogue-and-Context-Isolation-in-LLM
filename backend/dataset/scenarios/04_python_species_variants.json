{
  "scenario_name": "Python Species Variants Confusion",
  "description": "Tests ability to maintain distinct characteristics of Indian Python, African Rock Python, and Reticulated Python across 25 steps. Baseline will conflate sizes, habitats, and behaviors.",
  "steps": [
    {
      "step": 1,
      "context": "python_intro",
      "message": "Let's discuss three python species: Indian Python, African Rock Python, and Reticulated Python",
      "expected": "Three distinct constrictor snake species with different sizes, habitats, and behaviors",
      "node_type": "main",
      "action": "",
      "linear_failure_risk": "none - establishing species comparison"
    },
    {
      "step": 2,
      "context": "indian_python",
      "message": "Tell me about the Indian Python",
      "expected": "Indian Python (Python molurus) native to South Asia. 3-4 meters (10-13 feet) average length. Light-colored with brown blotches. Semi-aquatic, prefers marshes and grasslands. CITES protected",
      "node_type": "subchat_1",
      "action": "create_subchat",
      "selected_text": "Indian Python",
      "linear_failure_risk": "low - first species details"
    },
    {
      "step": 3,
      "context": "african_rock",
      "message": "What about the African Rock Python?",
      "expected": "African Rock Python (Python sebae) from sub-Saharan Africa. 4-6 meters (13-20 feet), one of world's largest snakes. Brown/olive coloration with irregular blotches. Aggressive temperament, ambush predator. Eats antelopes, crocodiles",
      "node_type": "subchat_2",
      "action": "create_subchat",
      "selected_text": "African Rock Python",
      "linear_failure_risk": "moderate - baseline may start mixing size and habitat"
    },
    {
      "step": 4,
      "context": "reticulated",
      "message": "Describe the Reticulated Python",
      "expected": "Reticulated Python (Malayopython reticulatus) from Southeast Asia. Longest snake: up to 6.5 meters (21 feet), some exceed 8 meters. Yellow/brown with black diamond pattern ('reticulated' = net-like). Excellent swimmers, coastal/rainforest habitat",
      "node_type": "subchat_3",
      "action": "create_subchat",
      "selected_text": "Reticulated Python",
      "linear_failure_risk": "moderate - three species now in context"
    },
    {
      "step": 5,
      "context": "indian_python",
      "message": "What's the Indian Python's conservation status?",
      "expected": "CITES Appendix I protected due to habitat loss and hunting for skin trade",
      "node_type": "subchat_1",
      "action": "switch_node",
      "linear_failure_risk": "moderate - returning to species 1 after introducing 2 others"
    },
    {
      "step": 6,
      "context": "african_rock",
      "message": "How aggressive are African Rock Pythons?",
      "expected": "Very aggressive and defensive. Known to attack humans. Bad-tempered compared to other python species",
      "node_type": "subchat_2",
      "action": "switch_node",
      "linear_failure_risk": "high - baseline may mix temperaments across species"
    },
    {
      "step": 7,
      "context": "reticulated",
      "message": "What does 'reticulated' mean?",
      "expected": "Net-like or mesh-like pattern - refers to the black diamond markings on yellow/brown background",
      "node_type": "subchat_3",
      "action": "switch_node",
      "linear_failure_risk": "high - baseline mixing color patterns"
    },
    {
      "step": 8,
      "context": "indian_python",
      "message": "What habitats do Indian Pythons prefer?",
      "expected": "Marshes, grasslands, river valleys. Semi-aquatic, good swimmers",
      "node_type": "subchat_1",
      "action": "switch_node",
      "linear_failure_risk": "high - step 2 habitat details now 6 messages back"
    },
    {
      "step": 9,
      "context": "african_rock",
      "message": "What do African Rock Pythons eat?",
      "expected": "Large prey: antelopes, warthogs, monitor lizards, even crocodiles and small lions",
      "node_type": "subchat_2",
      "action": "switch_node",
      "linear_failure_risk": "critical - baseline mixing diet across species"
    },
    {
      "step": 10,
      "context": "reticulated",
      "message": "Where are Reticulated Pythons found?",
      "expected": "Southeast Asia: Indonesia, Philippines, Thailand, Malaysia. Coastal areas and rainforests",
      "node_type": "subchat_3",
      "action": "switch_node",
      "linear_failure_risk": "critical - step 4 location now 6 messages back"
    },
    {
      "step": 11,
      "context": "indian_python",
      "message": "What's the average length of Indian Python?",
      "expected": "3-4 meters (10-13 feet)",
      "node_type": "subchat_1",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 2 size now 9 messages back, baseline mixing with other sizes"
    },
    {
      "step": 12,
      "context": "african_rock",
      "message": "How long do African Rock Pythons grow?",
      "expected": "4-6 meters (13-20 feet), one of the world's largest snakes",
      "node_type": "subchat_2",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - baseline confusing 3-4m, 4-6m, and 6.5m+ sizes"
    },
    {
      "step": 13,
      "context": "reticulated",
      "message": "What's the maximum length for Reticulated Python?",
      "expected": "Up to 6.5 meters (21 feet) commonly, some exceed 8 meters - longest snake species",
      "node_type": "subchat_3",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 4 length now 9 messages back"
    },
    {
      "step": 14,
      "context": "indian_python",
      "message": "What color is the Indian Python?",
      "expected": "Light-colored background with brown blotches",
      "node_type": "subchat_1",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - baseline mixing light brown, olive, yellow/brown patterns"
    },
    {
      "step": 15,
      "context": "african_rock",
      "message": "What's the African Rock Python's coloration?",
      "expected": "Brown or olive background with irregular darker blotches",
      "node_type": "subchat_2",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 3 color details now 12 messages back"
    },
    {
      "step": 16,
      "context": "reticulated",
      "message": "Describe Reticulated Python's pattern",
      "expected": "Yellow/brown with distinctive black diamond/net-like pattern",
      "node_type": "subchat_3",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - three different patterns completely mixed in baseline"
    },
    {
      "step": 17,
      "context": "size_comparison",
      "message": "Which python species is the largest?",
      "expected": "Reticulated Python is the longest at up to 6.5-8+ meters. African Rock Python is second at 4-6 meters. Indian Python is smallest at 3-4 meters",
      "node_type": "subchat_size",
      "action": "create_subchat",
      "parent_node_type": "main",
      "selected_text": "size comparison",
      "linear_failure_risk": "catastrophic - requires synthesizing steps 2, 3, 4 which are evicted from baseline buffer"
    },
    {
      "step": 18,
      "context": "habitat_comparison",
      "message": "Compare their habitats",
      "expected": "Indian Python: South Asia marshes/grasslands. African Rock Python: sub-Saharan Africa savannas. Reticulated Python: Southeast Asia coastal/rainforest",
      "node_type": "subchat_habitat",
      "action": "create_subchat",
      "parent_node_type": "main",
      "selected_text": "habitat",
      "linear_failure_risk": "catastrophic - requires recalling steps 2, 3, 4, 8, 10 geographic data"
    },
    {
      "step": 19,
      "context": "temperament_comparison",
      "message": "Which species is most aggressive?",
      "expected": "African Rock Python is most aggressive and defensive, known to attack humans. Indian and Reticulated Pythons are generally more docile",
      "node_type": "subchat_temperament",
      "action": "create_subchat",
      "parent_node_type": "main",
      "selected_text": "temperament",
      "linear_failure_risk": "catastrophic - step 6 aggression details now 13 messages back"
    },
    {
      "step": 20,
      "context": "diet_comparison",
      "message": "What prey size differences exist?",
      "expected": "African Rock Python eats largest prey (antelopes, crocodiles). Reticulated Python eats pigs, deer. Indian Python eats rodents, birds, smaller mammals due to smaller size",
      "node_type": "subchat_diet",
      "action": "create_subchat",
      "parent_node_type": "main",
      "selected_text": "diet",
      "linear_failure_risk": "catastrophic - step 9 diet details heavily diluted in baseline"
    },
    {
      "step": 21,
      "context": "indian_python",
      "message": "Recall: where is the Indian Python found?",
      "expected": "South Asia - India, Pakistan, Sri Lanka",
      "node_type": "subchat_1",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 2 location now 19 messages back, baseline completely lost"
    },
    {
      "step": 22,
      "context": "african_rock",
      "message": "What region does the African Rock Python inhabit?",
      "expected": "Sub-Saharan Africa",
      "node_type": "subchat_2",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 3 region now 19 messages back"
    },
    {
      "step": 23,
      "context": "reticulated",
      "message": "List countries with Reticulated Pythons",
      "expected": "Indonesia, Philippines, Thailand, Malaysia - Southeast Asian coastal and rainforest regions",
      "node_type": "subchat_3",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 10 location details now 13 messages back"
    },
    {
      "step": 24,
      "context": "python_intro",
      "message": "Which python is protected by CITES?",
      "expected": "Indian Python is CITES Appendix I protected",
      "node_type": "main",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - step 5 conservation status now 19 messages back"
    },
    {
      "step": 25,
      "context": "python_intro",
      "message": "Summarize all three species' key differences",
      "expected": "Indian Python: 3-4m, South Asia, light brown blotches, marshes, CITES protected, docile. African Rock Python: 4-6m, sub-Saharan Africa, olive/brown, aggressive, eats large prey. Reticulated Python: 6.5-8m, Southeast Asia, yellow-brown diamond pattern, longest snake, coastal/rainforest",
      "node_type": "main",
      "action": "switch_node",
      "linear_failure_risk": "catastrophic - ultimate synthesis requiring steps 2-16, baseline has completely lost ability to distinguish the three species after 25 mixed messages"
    }
  ]
}
